import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import LanguageDetector from 'i18next-browser-languagedetector';

// Translation resources
const resources = {
  es: {
    translation: {
      // Common
      'common.save': 'Guardar',
      'common.cancel': 'Cancelar',
      'common.delete': 'Eliminar',
      'common.edit': 'Editar',
      'common.add': 'Agregar',
      'common.search': 'Buscar',
      'common.filter': 'Filtrar',
      'common.export': 'Exportar',
      'common.import': 'Importar',
      'common.loading': 'Cargando...',
      'common.error': 'Error',
      'common.success': 'Éxito',
      'common.warning': 'Advertencia',
      'common.info': 'Información',
      'common.yes': 'Sí',
      'common.no': 'No',
      'common.close': 'Cerrar',
      'common.back': 'Volver',
      'common.next': 'Siguiente',
      'common.previous': 'Anterior',
      'common.submit': 'Enviar',
      'common.reset': 'Restablecer',
      'common.clear': 'Limpiar',
      'common.select': 'Seleccionar',
      'common.actions': 'Acciones',
      'common.status': 'Estado',
      'common.date': 'Fecha',
      'common.time': 'Hora',
      'common.name': 'Nombre',
      'common.email': 'Correo electrónico',
      'common.phone': 'Teléfono',
      'common.address': 'Dirección',
      'common.notes': 'Notas',
      'common.description': 'Descripción',
      'common.total': 'Total',
      'common.active': 'Activo',
      'common.inactive': 'Inactivo',

      // Navigation
      'nav.dashboard': 'Panel de Control',
      'nav.patients': 'Pacientes',
      'nav.appointments': 'Citas',
      'nav.ai_analysis': 'Análisis con IA',
      'nav.xray_analysis': 'Análisis de Rayos X',
      'nav.lab_reports': 'Informes de Laboratorio',
      'nav.comparison': 'Comparación de Informes',
      'nav.odontogram': 'Odontograma',
      'nav.prospects': 'Prospectos y CRM',
      'nav.prescriptions': 'Recetas',
      'nav.lab_providers': 'Proveedores de Laboratorio',
      'nav.reports': 'Reportes',
      'nav.settings': 'Configuración',
      'nav.logout': 'Cerrar Sesión',

      // Auth
      'auth.login': 'Iniciar Sesión',
      'auth.logout': 'Cerrar Sesión',
      'auth.register': 'Registrarse',
      'auth.email': 'Correo Electrónico',
      'auth.password': 'Contraseña',
      'auth.confirm_password': 'Confirmar Contraseña',
      'auth.forgot_password': 'Olvidé mi contraseña',
      'auth.remember_me': 'Recordarme',
      'auth.login_success': 'Inicio de sesión exitoso',
      'auth.login_error': 'Error en el inicio de sesión',
      'auth.logout_success': 'Sesión cerrada exitosamente',

      // Dashboard
      dashboard: {
        title: 'Panel de Administrador',
        subtitle: 'Resumen completo de las operaciones de su clínica y el estado del sistema.',
        todayAppointments: 'Citas de Hoy',
        totalPatients: 'Pacientes Totales',
        monthlyRevenue: 'Ingresos Mensuales',
        lowStockItems: 'Artículos con Poco Stock',
        recentAppointments: 'Citas Recientes',
        recentLeads: 'Leads Recientes',
        revenueSummary: 'Resumen de Ingresos',
        appointmentStatus: 'Estado de Citas',
        viewDetails: 'Ver Detalles',
        seeAll: 'Ver Todo',
        apiConnectionTest: 'Prueba de Conexión API',
        connected: 'Conectado',
        status: 'Estado',
        timestamp: 'Marca de tiempo',
        runningAndAvailable: 'La API del backend está funcionando y disponible'
      },

      // Lab Providers
      labProviders: {
        title: 'Proveedores de Laboratorio',
        subtitle: 'Gestionar socios y proveedores de laboratorio externos para Central Medical Center',
        update: 'Actualizar',
        addProvider: 'Add Lab Vendor',
        totalProviders: 'Proveedores Totales',
        activeProviders: 'Proveedores Activos',
        pendingProviders: 'Pendiente',
        totalTests: 'Total Tests',
        searchPlaceholder: 'Buscar por nombre de proveedor, código, persona de contacto o especialidad...',
        allStatuses: 'Todos los Estados',
        allSpecialties: 'Todas las Especialidades',
        active: 'Activo',
        inactive: 'Inactivo',
        pending: 'Pendiente',
        chemistry: 'Química',
        pathology: 'Patología',
        molecular: 'Molecular',
        providersTitle: 'Proveedores y Socios de Laboratorio',
        providersSubtitle: 'Gestionar relaciones con proveedores de servicios de laboratorio externos',
        providerDetails: 'Detalles del Proveedor',
        contactInfo: 'Información de Contacto',
        specialties: 'Specialties',
        performance: 'Rendimiento',
        contract: 'Contract',
        status: 'Estado',
        actions: 'Acciones',
        tests: 'pruebas'
      },

      // X-Ray Analysis
      xrayAnalysis: {
        title: 'Análisis de rayos X con IA',
        subtitle: 'Sube radiografías dentales y obtén informes de análisis con IA',
        totalAnalysis: 'Total de Análisis',
        completed: 'Completada',
        pending: 'Pendiente',
        commonFindings: 'Common Findings',
        last30Days: 'en los últimos 30 días',
        successRate: 'tasa de éxito',
        processingNow: 'Procesando actualmente',
        mostDetected: 'Caries detectadas',
        newAnalysis: 'Nuevo Análisis',
        analysisHistory: 'Historial de Análisis',
        uploadTitle: 'Subir Imagen de Rayos X',
        uploadSubtitle: 'Seleccione una imagen de rayos X dental y agregue instrucciones opcionales de análisis',
        uploadPlaceholder: 'Suelte su imagen de rayos X aquí, o haga clic para navegar',
        supportedFormats: 'Soporta JPEG, JPG, PNG (máximo 10MB)',
        downloadSample: 'Descargar Radiografía de Muestra',
        needSample: '¿Necesita una radiografía de muestra para prueba?',
        sampleDescription: 'Descargue nuestra imagen de radiografía dental de muestra para probar la función de análisis de IA.',
        selectPatient: 'Seleccionar Paciente',
        choosePatient: 'Elegir un paciente...',
        instructions: 'Instrucciones de Análisis Personalizadas',
        optional: 'Opcional',
        instructionsPlaceholder: 'ej., Enfóquese en la posición de las muelas del juicio, verifique signos de infección...',
        analysisNote: 'Deje vacío para usar análisis comprensivo por defecto',
        analyzeButton: 'Analizar Radiografía',
        analyzing: 'Analizando',
        recentAnalysis: 'Análisis Recientes',
        invalidFileType: 'Tipo de archivo inválido. Solo se permiten imágenes JPEG y PNG.',
        missingRequiredFields: 'Por favor seleccione un archivo y un paciente.',
        analysisStarted: 'Análisis iniciado exitosamente.',
        analysisError: 'Error al iniciar el análisis.',
        sampleDownloaded: 'Radiografía de muestra descargada.'
      },

      // Test Reports Analysis
      testReportsAnalysis: {
        title: 'Análisis de Informes de Pruebas con IA',
        subtitle: 'Sube informes de pruebas y obtén análisis e interpretación con IA',
        totalAnalysis: 'Total de Análisis',
        completed: 'Completada',
        processing: 'Procesando',
        mainTestType: 'Tipo de Prueba Principal',
        last30Days: 'en los últimos 30 días',
        successRate: 'tasa de éxito',
        processingNow: 'Procesando actualmente',
        noData: 'Sin datos',
        newAnalysis: 'Nuevo Análisis',
        analysisHistory: 'Historial de Análisis',
        uploadTitle: 'Subir Informe de Prueba',
        uploadSubtitle: 'Seleccione una imagen de informe de prueba o PDF y agregue instrucciones opcionales de análisis. Los PDFs están limitados a las primeras 5 páginas para análisis.',
        uploadPlaceholder: 'Suelte su informe de prueba aquí, o haga clic para navegar',
        supportedFormats: 'Soporta JPEG, PNG, PDF (máximo 15MB). Para PDFs, se analizan las primeras 5 páginas.',
        browseFiles: 'Navegar Archivos',
        selectPatient: 'Seleccionar Paciente',
        choosePatient: 'Elegir un paciente...',
        instructions: 'Instrucciones de Análisis Personalizadas',
        optional: 'Opcional',
        instructionsPlaceholder: 'ej., Enfóquese en pruebas de función hepática, verifique marcadores de diabetes...',
        analysisNote: 'Deje vacío para usar análisis comprensivo por defecto',
        analyzeButton: 'Analizar Informe de Prueba',
        analyzing: 'Analizando',
        recentAnalysis: 'Análisis Recientes',
        invalidFileType: 'Tipo de archivo inválido. Solo se permiten archivos PDF, JPEG y PNG.',
        missingRequiredFields: 'Por favor seleccione un archivo y un paciente.',
        analysisStarted: 'Análisis iniciado exitosamente.',
        analysisError: 'Error al iniciar el análisis.'
      },

      // Odontogram
      odontogram: {
        title: 'Odontogramas',
        subtitle: 'Gestionar cartas dentales y planes de tratamiento',
        updateStats: 'Actualizar Estadísticas',
        newOdontogram: 'Nuevo Odontograma',
        totalPatients: 'Pacientes Totales',
        completionRate: 'Tasa de Finalización',
        activeTreatments: 'Tratamientos Activos',
        totalRevenue: 'Ingresos Totales',
        withDentalCharts: 'con registros dentales',
        treatmentCompletion: 'finalización del tratamiento',
        inProgress: 'en progreso',
        estimatedValue: 'valor estimado',
        searchPlaceholder: 'Buscar por nombre de paciente...',
        allDoctors: 'Todos los Doctores',
        mostRecent: 'Más Recientes Primero',
        allSpecialties: 'Todas las Especialidades',
        activeOnly: 'Solo Activos',
        thisWeek: 'Esta Semana',
        thisMonth: 'Este Mes',
        general: 'General',
        orthodontics: 'Ortodoncia',
        endodontics: 'Endodoncia',
        dentalRecords: 'Registros Dentales',
        recordsSubtitle: 'Ver y gestionar cartas dentales de pacientes',
        patient: 'Paciente',
        doctor: 'Doctor',
        examDate: 'Fecha / Hora del Examen',
        version: 'Versión',
        status: 'Estado',
        progress: 'Progress',
        treatments: 'Treatments',
        actions: 'Acciones',
        age: 'Edad',
        view: 'Ver',
        history: 'History'
      },

      // Appointments
      appointments: {
        title: 'Citas',
        subtitle: 'Gestionar citas y horarios de pacientes',
        newAppointment: 'New Appointment',
        todayAppointments: 'Citas de Hoy',
        completed: 'Completada',
        pending: 'Pendiente',
        cancelled: 'Cancelado',
        searchPlaceholder: 'Buscar citas por paciente o doctor...',
        allStatuses: 'Todos los Estados',
        allDates: 'Todas las Fechas',
        today: 'Hoy',
        thisWeek: 'Esta Semana',
        thisMonth: 'Este Mes',
        tableView: 'Tabla',
        calendarView: 'Calendario',
        patient: 'Paciente',
        doctor: 'Doctor',
        date: 'Fecha',
        time: 'Hora',
        type: 'Tipo',
        status: 'Estado',
        actions: 'Acciones',
        noShow: 'No Asistió'
      },

      // Prospects
      prospects: {
        title: 'Prospectos y CRM',
        subtitle: 'Gestionar pacientes potenciales y rastrear conversiones',
        update: 'Actualizar',
        addProspect: 'Agregar Prospecto',
        totalProspects: 'Total de Prospectos',
        newProspects: 'Nuevos Prospectos',
        converted: 'Converted',
        conversionRate: 'Tasa de Conversión',
        allPotentialPatients: 'Todos los pacientes potenciales',
        awaitingContact: 'Esperando contacto',
        becamePatients: 'Socios pacientes',
        successRate: 'Tasa de éxito',
        searchPlaceholder: 'Buscar prospectos por nombre, email o teléfono...',
        allSources: 'Todos los...',
        allStatuses: 'Todas las...',
        social: 'Social',
        advertisement: 'Advertisement',
        walkIn: 'Walk-in',
        referral: 'Referral',
        new: 'New',
        contacted: 'Contacted',
        lost: 'Lost',
        managementTitle: 'Gestión de Prospectos (10)',
        managementSubtitle: 'Rastrear y gestione pacientes potenciales a través del embudo de conversión',
        prospectDetails: 'Detalles del Prospecto',
        contactInfo: 'Información de Contacto',
        source: 'Fuente',
        serviceInterest: 'Interés en Servicio',
        assignedTo: 'Asignado a',
        status: 'Estado',
        created: 'Creado',
        actions: 'Acciones',
        prospectId: 'Prospecto'
      },

      // Prescriptions
      prescriptions: {
        title: 'Recetas',
        subtitle: 'Gestionar recetas y medicamentos de pacientes',
        newPrescription: 'New Prescription',
        totalPrescriptions: 'Total de Recetas',
        active: 'Activa',
        pending: 'Pendiente',
        dispensed: 'Dispensada',
        completed: 'Completada',
        searchPlaceholder: 'Buscar por ID de receta, nombre de paciente, médico o diagnóstico...',
        allStatuses: 'Todos los Estados',
        allDoctors: 'Todos los Doctores',
        allTime: 'Todo el Tiempo',
        today: 'Hoy',
        thisWeek: 'Esta Semana',
        thisMonth: 'Este Mes',
        recordsTitle: 'Registros de Recetas',
        recordsSubtitle: 'Lista completa de todas las recetas de pacientes y órdenes de medicamentos',
        prescription: 'Receta',
        patient: 'Paciente',
        doctor: 'Doctor',
        diagnosis: 'Diagnóstico',
        medications: 'Medicamentos',
        status: 'Estado',
        date: 'Fecha',
        actions: 'Acciones',
        age: 'Edad'
      },

      // Errors
      'error.network': 'Error de conexión de red',
      'error.server': 'Error del servidor',
      'error.unauthorized': 'No autorizado',
      'error.forbidden': 'Acceso denegado',
      'error.not_found': 'No encontrado',
      'error.validation': 'Error de validación',
      'error.unknown': 'Error desconocido',

      // Success Messages
      'success.saved': 'Guardado exitosamente',
      'success.deleted': 'Eliminado exitosamente',
      'success.updated': 'Actualizado exitosamente',
      'success.created': 'Creado exitosamente',
      'success.sent': 'Enviado exitosamente'
    }
  },
  en: {
    translation: {
      // Common
      'common.save': 'Save',
      'common.cancel': 'Cancel',
      'common.delete': 'Delete',
      'common.edit': 'Edit',
      'common.add': 'Add',
      'common.search': 'Search',
      'common.filter': 'Filter',
      'common.export': 'Export',
      'common.import': 'Import',
      'common.loading': 'Loading...',
      'common.error': 'Error',
      'common.success': 'Success',
      'common.warning': 'Warning',
      'common.info': 'Information',
      'common.yes': 'Yes',
      'common.no': 'No',
      'common.close': 'Close',
      'common.back': 'Back',
      'common.next': 'Next',
      'common.previous': 'Previous',
      'common.submit': 'Submit',
      'common.reset': 'Reset',
      'common.clear': 'Clear',
      'common.select': 'Select',
      'common.actions': 'Actions',
      'common.status': 'Status',
      'common.date': 'Date',
      'common.time': 'Time',
      'common.name': 'Name',
      'common.email': 'Email',
      'common.phone': 'Phone',
      'common.address': 'Address',
      'common.notes': 'Notes',
      'common.description': 'Description',
      'common.total': 'Total',
      'common.active': 'Active',
      'common.inactive': 'Inactive',

      // Navigation
      'nav.dashboard': 'Dashboard',
      'nav.patients': 'Patients',
      'nav.appointments': 'Appointments',
      'nav.ai_analysis': 'AI Analysis',
      'nav.xray_analysis': 'X-ray Analysis',
      'nav.lab_reports': 'Lab Reports',
      'nav.comparison': 'Report Comparison',
      'nav.odontogram': 'Odontogram',
      'nav.prospects': 'Prospects & CRM',
      'nav.prescriptions': 'Prescriptions',
      'nav.lab_providers': 'Lab Providers',
      'nav.reports': 'Reports',
      'nav.settings': 'Settings',
      'nav.logout': 'Logout',

      // Auth
      'auth.login': 'Login',
      'auth.logout': 'Logout',
      'auth.register': 'Register',
      'auth.email': 'Email',
      'auth.password': 'Password',
      'auth.confirm_password': 'Confirm Password',
      'auth.forgot_password': 'Forgot Password',
      'auth.remember_me': 'Remember Me',
      'auth.login_success': 'Login successful',
      'auth.login_error': 'Login error',
      'auth.logout_success': 'Logout successful',

      // Dashboard
      dashboard: {
        title: 'Admin Dashboard',
        subtitle: 'Complete overview of your clinic operations and system status.',
        todayAppointments: 'Today\'s Appointments',
        totalPatients: 'Total Patients',
        monthlyRevenue: 'Monthly Revenue',
        lowStockItems: 'Low Stock Items'
      },

      // Errors
      'error.network': 'Network connection error',
      'error.server': 'Server error',
      'error.unauthorized': 'Unauthorized',
      'error.forbidden': 'Access denied',
      'error.not_found': 'Not found',
      'error.validation': 'Validation error',
      'error.unknown': 'Unknown error',

      // Success Messages
      'success.saved': 'Saved successfully',
      'success.deleted': 'Deleted successfully',
      'success.updated': 'Updated successfully',
      'success.created': 'Created successfully',
      'success.sent': 'Sent successfully'
    }
  }
};

// Initialize i18n
i18n
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    resources,
    fallbackLng: 'es',
    debug: process.env.NODE_ENV === 'development',
    
    interpolation: {
      escapeValue: false, // React already does escaping
    },
    
    detection: {
      order: ['localStorage', 'navigator', 'htmlTag'],
      caches: ['localStorage'],
    },
  });

export default i18n;
